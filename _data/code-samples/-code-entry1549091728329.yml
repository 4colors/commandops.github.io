_id: 5126f170-26ba-11e9-b4b3-d36b3e805417
author: whicker
notes: >-
  Not quite perfect code to lay out bios or false contacts in a grid with some
  jitter on the angle and distance apart. having trouble with the depth - they
  get assigned a nice random depth but then go to something else. Seems to be
  different based on if they are on a mission or not (sea control). Places a
  Cessna if the depth is not right, need to delete those at the end.
code: "local DBIDTABLE = { 92,355,354,93,94,95 }\r\nlocal unitsToDelete = {}\r\n\r\nfunction placeRandomBiologic(side,unit,distance,distanceJitter,angle,angleJitter,minDepth)\r\n--math.randomseed(os.time())\r\nlocal u = ScenEdit_GetUnit({guid=unit})\r\nprint(u)\r\nif u ~= nil then\r\n  local m = math.random(distance-distanceJitter,distance+distanceJitter)\r\n  local b = math.random(angle-angleJitter,angle+angleJitter)\r\n  local point = ScenEdit_AddReferencePoint( {side=side, name=\"possible\", RelativeTo=unit, bearing=b ,distance=m})\r\n  ScenEdit_DeleteReferencePoint({side=side, name =\"possible\"}) \r\n  local elevation = World_GetElevation({latitude = point.latitude, longitude= point.longitude})\r\n  print(elevation) \r\n        if elevation < minDepth then\r\n        DBID = DBIDTABLE[math.random( 1, #DBIDTABLE)]\r\n        local new_bio = ScenEdit_AddUnit({side='Biologics', type='Submarine',name='Biologic/False Contact', dbid=DBID,latitude=point.latitude,longitude=point.longitude, manualAltitude= true, depth=math.random(50, 300), manualSpeed=math.random(0, 4)}) \r\nScenEdit_AssignUnitToMission( new_bio.guid, 'Bios')        \r\nreturn new_bio--exit, we are done\r\n        else\r\n        local unitToDelete = ScenEdit_AddUnit({side='Biologics', type='Aircraft',name='AC Holder to be deleted', dbid=1571, loadoutid = 8397,latitude=point.latitude,longitude=point.longitude, altitude = 5000}) \r\n        return unitToDelete     \r\n-- need to add the unitToDelete to the list of units to delete and then need to delete them \r\n        end --end elevation if\r\n else \r\nprint('unit does not exist')\r\nend --end unit check\r\nend --end function\r\n\r\nlocal distance = 75\r\nlocal distanceJitter = 6\r\nlocal angleJitter =4\r\nlocal angle =  90\r\nlocal minDepth = -40\r\nlocal columns = 2\r\nlocal u = '71cd57be-342c-4be3-86f4-fe4b0d5157cd' --guid of unit used to start the grid\r\nfor i = 1,columns do\r\nlocal newBio = placeRandomBiologic('Biologics',u,distance, distanceJitter, 0, angleJitter, minDepth) -- call the function\r\nu= newBio.guid\r\nfor i = 1,columns do\r\nlocal newBio = placeRandomBiologic('Biologics',u,distance, distanceJitter, angle, angleJitter, minDepth) -- call the function\r\nu= newBio.guid\r\nend\r\nif angle == 90 then\r\nangle = 270\r\nelse angle = 90\r\nend\r\nend"
date: 1549091728
