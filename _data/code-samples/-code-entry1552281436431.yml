_id: ef537ed0-43bc-11e9-ab1b-b1484e5f4180
author: whicker
notes: >-
  Take a course and modify the way points by adding or subtracting a random
  number. Used this as part of an event to help ships leave port and have random
  paths.
code: "math.randomseed(os.clock())\r\nlocal pathOut =  { [1] = { longitude = 29.504992491273, latitude = 40.7526965507348, TypeOf = 'ManualPlottedCourseWaypoint' }, [2] = { longitude = 29.3745803276918, latitude = 40.7278136152586, TypeOf = 'ManualPlottedCourseWaypoint' }, [3] = { longitude = 29.1246010812686, latitude = 40.7689734953455, TypeOf = 'ManualPlottedCourseWaypoint' }, [4] = { longitude = 28.9500444423617, latitude = 40.9075743371518, TypeOf = 'ManualPlottedCourseWaypoint' }, [5] = { longitude = 29.0111772910605, latitude = 41.0375941194471, TypeOf = 'ManualPlottedCourseWaypoint' }, [6] = { longitude = 29.0839186785473, latitude = 41.1281200761105, TypeOf = 'ManualPlottedCourseWaypoint' }, [7] = { longitude = 29.1226787477602, latitude = 41.2136790481829, TypeOf = 'ManualPlottedCourseWaypoint' }, [8] = { longitude = 29.1642381406793, latitude = 41.2627082444442, TypeOf = 'ManualPlottedCourseWaypoint' } }\r\n\r\nfunction ShipPathOffset() --provides tiny offset to lat/lon\r\n  local offset = math.random(300,699)\r\n  print('offset before manipulation: '..offset)\r\n  offset = (offset- 500)/20000\r\n  print('offset after (subtract 500, divide by 20000: '..offset)\r\n   return offset\r\nend --end function\r\n\r\nlocal u = ScenEdit_UnitX ()\r\nif u.condition == 'Returning to base' then\r\n\tprint(u.name.. ' is returning to base')\r\n\telse\r\nprint(u.name.. ' is leaving port, assigning new course')\r\nlocal newCourse = pathOut --create new course object to manipulate\r\nprint('waypoints: '..#pathOut)\r\nfor i = 1, #newCourse do\r\n--print(newCourse[i].longitude)\r\nnewCourse[i].latitude = newCourse[i].latitude + ShipPathOffset()\r\nnewCourse[i].longitude = newCourse[i].longitude + ShipPathOffset()\r\nend --end table loop\r\nu.course = newCourse\t\r\n\r\nScenEdit_SetDoctrine({side=\"NATO\", unitname=u.name}, {ignore_plotted_course= \"no\" })\r\nend --end condition check"
date: 1552281436
