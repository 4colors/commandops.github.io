_id: 3334d1b0-b490-11e8-8a28-256c912c318e
author: whicker
notes: >-
  Special Action/Lua based in game timer. Add a Special Action called Timer, and
  the following Lua.
code: "-- Time helper, triggers use weird time\r\nfunction TimerTimeFromNowDotNetTime(addSeconds)\r\n    local time = ScenEdit_CurrentTime()\r\n    local offSet = 62135596801 --number of seconds from 01-01-0001 to 01-01-1970\r\n    local newTime = (time + offSet + addSeconds)*10000000\r\n    local timeToUse = string.format(\"%18.0f\",newTime)\r\n    return timeToUse\r\nend\r\n\r\nfunction CreateTimerEvent(minutes,message)\r\nScenEdit_SetEvent(minutes..\" Minute Timer (\"..message..\")\", {mode=\"add\",IsRepeatable=0})\r\nScenEdit_SetTrigger({mode=\"add\", type=\"Time\", name=minutes..\" Minute Timer Trigger (\"..message..\")\", Time=TimerTimeFromNowDotNetTime(minutes*60) })\r\n ScenEdit_SetAction({mode=\"add\", type=\"LuaScript\", name=minutes..\" Minute Timer Action (\"..message..\")\",\r\n scriptText='ScenEdit_SpecialMessage (ScenEdit_PlayerSide(),\"Your Timer is Up:  '..message..' \")'})\r\nScenEdit_SetEventTrigger(minutes..\" Minute Timer (\"..message..\")\", {mode=\"add\", name=minutes..\" Minute Timer Trigger (\"..message..\")\"})\r\nScenEdit_SetEventAction(minutes..\" Minute Timer (\"..message..\")\", {mode=\"add\", name=minutes..\" Minute Timer Action (\"..message..\")\"})\r\nend\r\n\r\nlocal timerMinutes = ScenEdit_InputBox('How long do want the timer to be in minutes?') \r\nprint('Response was ' ..timerMinutes) \r\nlocal timerMessage = ScenEdit_InputBox('What do you want to call the timer?') \r\nprint('Response2 was ' .. timerMessage) \r\nCreateTimerEvent(timerMinutes,timerMessage)"
date: 1536539206
