_id: 8a656720-d9a6-11e8-aeb2-a14cbc5b8eb2
author: whicker
notes: >-
  Change all groups and units from one side to another, basically merging 2
  sides. The side you are changing to must exist. It is setup as 2 separate
  functions, one that changes groups, and then one that changes units after
  that. When I tried to do them at the same time it would always error at some
  point. Caveats: barely tested, uses up significant memory (150MB on a few
  hundred units).
code: "local oldside = \"test\" --set name of old side\r\nlocal newside =  \"Republic of Azure\" --set name of new side, must exist\r\n\r\nfunction changesSidesGroups(newSide, oldSide) --function number one\r\nlocal a = VP_GetSide({Side =oldSide}) -- get all units from old side\r\nlocal groups = {} --create empty array(table) to store group guids\r\nfor i = 1, #a.units do -- loops thru all units on the side\r\nlocal u = ScenEdit_GetUnit({guid = a.units[i].guid}) --convert VP guid to Unit wrapper\r\nif u.type == 'Group' then -- check if group, if so add the group guid to the table\r\ntable.insert(groups, u.guid) \r\nprint(u.name.. \" side: \"..u.side ) --testing by printing to console\r\nend --closes if statement\r\nend --closes loop\r\nfor i = 1, #groups do --loop thru new table of group guids\r\nprint(groups[i]) --testing by printing to console\r\nScenEdit_SetUnitSide({side=oldSide, guid=groups[i], newside=newSide}) --change side from old to new\r\nend --closes loop\r\nchangeSidesUnits(newSide, oldSide) -- call second function to change units that are not in groups\r\nend --closes function\r\n\r\nfunction changeSidesUnits(newSide,oldSide) --function number two for non grouped units\r\nlocal a2 = VP_GetSide({Side =oldSide}) -- get all units from old side - won't include groups as they are already done\r\nlocal units = {} --create another empty table\r\nfor i = 1, #a2.units do --loop thru units and push them into the table\r\ntable.insert(units, a2.units[i].guid) \r\nend --closes loop\r\n\r\nfor i = 1, #units do --loop thru table of units\r\nprint(units[i]) --testing by printing to console\r\nScenEdit_SetUnitSide({side=oldSide, guid=units[i], newside=newSide}) --change side\r\nend --closes loop\r\nend -- closes second function \r\n\r\nchangesSidesGroups(newside, oldside) --call function number one to do all the magic stuff, it will call function number two."
date: 1540616994
