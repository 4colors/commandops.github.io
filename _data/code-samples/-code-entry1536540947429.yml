_id: 40d96a70-b494-11e8-8a28-256c912c318e
author: whicker
notes: >-
  In game timer using Special Actions. Create a Special Action named Timer and
  use this in the lua part.
code: "function TimerTimeFromNowDotNetTime(addSeconds) -- Time helper cause event times are weird\r\n    local time = ScenEdit_CurrentTime()\r\n    local offSet = 62135596801 --number of seconds from 01-01-0001 to 01-01-1970\r\n    local newTime = (time + offSet + addSeconds)*10000000\r\n    local timeToUse = string.format(\"%18.0f\",newTime)\r\n    return timeToUse\r\nend\r\n\r\nfunction CreateTimerEvent(minutes,message)\r\n local t = ScenEdit_CurrentTime() --need to add something to the names to make them unique, using time\r\nScenEdit_SetEvent(minutes..\" Minute Timer (\"..message..\")\"..t, {mode=\"add\",IsRepeatable=0})\r\nScenEdit_SetTrigger({mode=\"add\", type=\"Time\", name=minutes..\" Minute Timer Trigger (\"..message..\")\"..t, Time=TimerTimeFromNowDotNetTime(minutes*60) })\r\n ScenEdit_SetAction({mode=\"add\", type=\"LuaScript\", name=minutes..\" Minute Timer Action (\"..message..\")\"..t,\r\n scriptText='ScenEdit_SpecialMessage (ScenEdit_PlayerSide(),\"Your Timer is Up:  '..message..' \")'})\r\nScenEdit_SetEventTrigger(minutes..\" Minute Timer (\"..message..\")\"..t, {mode=\"add\", name=minutes..\" Minute Timer Trigger (\"..message..\")\"..t})\r\nScenEdit_SetEventAction(minutes..\" Minute Timer (\"..message..\")\"..t, {mode=\"add\", name=minutes..\" Minute Timer Action (\"..message..\")\"..t})\r\nend\r\n\r\nlocal timerMinutes = ScenEdit_InputBox('How long do want the timer to be in minutes?') \r\nprint('Response was ' ..timerMinutes) \r\nlocal timerMessage = ScenEdit_InputBox('What do you want to call the timer?') \r\nprint('Response2 was ' .. timerMessage) \r\nCreateTimerEvent(timerMinutes,timerMessage)"
date: 1536540947
