_id: 40daef30-7afb-11e8-b5f4-6170e8cb26a5
author: 'whicker credit to Apache85 via http://thestrategygamer.com'
notes: Random ship/merchant/fish generator
code: "math.randomseed(os.time())\r\n\r\nmerch_num = math.random(5,10) --change 5 or 10 to your specified minimum and maximum number of merchants\r\n\r\nfor i = 1,merch_num do\r\nredo_count = 0\r\n::redo::\r\nlocal lat_var = math.random(1,(10^13))\r\nlocal lon_var = math.random(1,(10^13))\r\nv_lat = math.random(20,28) + (lat_var/(10^13)) --change the first set (south is negative) to your specified minimum and maximum latitude values; it's important that the first number is smaller than the second.\r\nv_lon = math.random(-95,-63) + (lon_var/(10^13)) --change first set (west is negative!) to your specified minimum and maximum longitude values; it's important that the first number is smaller than the second.\r\nelevation = World_GetElevation({latitude=v_lat, longitude=v_lon})\r\nif elevation > -10 then --Checks to see if the water is deep enough, adjust as you please\r\nredo_count = redo_count + 1\r\nprint(\"no\")\r\nif redo_count >50 then\r\nprint (redo_count .. 'ships were not able to find a suitable spot for placement. Re-check latitude and longitude settings')\r\nbreak --this cuts the loop if there are no suitable positions found after 50 tries, prevents infinite loop/game freeze\r\nelse\r\ngoto redo --retries the placement if the water is too shallow\r\nend\r\nend\r\nDBIDTABLE = { 775, 2027, 2029, 2028, 2030, 774, 2026, 2031, 2775, 2023, 773, 2774, 1001, 1374, 2773, 2776, 1006, 222, 1599, 2034, 1002, 1317, 144, 339, 275, 145, 2022, 259 } --list of DBIDs\r\nDBID = DBIDTABLE[math.random( 1, #DBIDTABLE)]\r\nlocal new_merch = ScenEdit_AddUnit({side='Merchant', type='Ship',name='Merchant #'..i, dbid=DBID,latitude=v_lat,longitude=v_lon})\r\nlocal fuel = new_merch.fuel\r\nfuel[3001].current = fuel[3001].max*math.random(600, 800)/1000\r\nnew_merch.fuel = fuel\r\n--ScenEdit_AssignUnitToMission( new_merch.name, 'VLADIVOSTOK')\r\nprint (new_merch.name..' with dbid '..DBID..' was created in water with a depth of '..elevation..'m')\r\nend"
date: 1530208018
