_id: f3b46000-8271-11e8-a8a6-015c41740c61
author: whicker
notes: >-
  updated code for random bios. Sets a random speed between 0 and 4 and a random
  depth (max 270m or so). Use with a mission named 'Whales' set to patrol - sea
  control.
code: "math.randomseed(os.time()) \r\nbio_num = math.random(35,55) --change to your specified minimum and maximum number of bios \r\n\r\nfor i = 1,bio_num do \r\nredo_count = 0 \r\n::redo:: \r\nlocal lat_var = math.random(1,(10^13)) --don't change \r\nlocal lon_var = math.random(1,(10^13)) --don't change \r\nv_lat = math.random(14,26) + (lat_var/(10^13)) --change the first set (south is negative) to your specified minimum and maximum latitude values; it's important that the first number is smaller than the second. \r\nv_lon = math.random(-78,-60) + (lon_var/(10^13)) --change first set (west is negative!) to your specified minimum and maximum longitude values; it's important that the first number is smaller than the second. \r\nelevation = World_GetElevation({latitude=v_lat, longitude=v_lon}) \r\nif elevation > -40 then --(meters?) Checks to see if the water is deep enough, adjust as you please \r\n\r\nredo_count = redo_count + 1 \r\nprint(\"picked bad co-ordinates\") \r\nif redo_count >50 then \r\nprint ('units were not able to find a suitable spot for placement. Re-check latitude and longitude settings') \r\nbreak --this cuts the loop if there are no suitable positions found after 50 tries, prevents infinite loop/game freeze \r\n\r\nelse \r\ngoto redo --retries the placement if the water is too shallow \r\nend \r\nend \r\n\r\nDBIDTABLE = { 92,355,354 } --list of dbids for bios, could be subs \r\nlocal actual_depth = elevation --need 2 variables for depth - actual depth at that location and the depth the unit is set to, though this is only for the print to log \r\nif elevation < -300 then elevation = -299 end -- max depth for bios is 300, if actual depth is more than 300m set to 299 so random depth is achievable \r\nlocal bio_depth = -1*elevation*math.random(100, 900)/1000 --have to reverse the sign, depth is a positive number, multiply by random percent between 10 and 90% \r\nDBID = DBIDTABLE[math.random( 1, #DBIDTABLE)] --choose random dbid for unit \r\nlocal new_bio = ScenEdit_AddUnit({side='Biologics', type='Submarine',name='Biologic #'..i, dbid=DBID,latitude=v_lat,longitude=v_lon, depth='bio_depth', manualSpeed=math.random(0, 4)}) \r\n\r\nScenEdit_AssignUnitToMission( new_bio.name, 'Whales') --add to mission which helps with the course \r\nprint (new_bio.name..' with dbid '..DBID..' was created in water with a depth of '..actual_depth..'m, at a depth of ' ..bio_depth ) \r\nend"
date: 1531028657
