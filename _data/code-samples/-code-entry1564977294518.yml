_id: c886f160-b734-11e9-8b2d-439f5113ecff
author: whicker
notes: >-
  Special action for enemy losses - start with known pre war stats, subtract
  current number of ships,subs and ac to get losses.
code: "function WW_GetUnitTotals(side)\r\nlocal a = VP_GetSide({Side =side})  -- put your side name here\r\nlocal Ships = {} --create empty array(table) to store group guids\r\nlocal AC = {}\r\nlocal Subs = {}\r\nlocal Facilities = {}\r\nfor i = 1, #a.units do -- loops thru all units on the side\r\nlocal u = ScenEdit_GetUnit({guid = a.units[i].guid}) --convert VP guid to Unit wrapper\r\nif u.type == 'Ship' then -- check if group, if so add the group guid to the table\r\n    table.insert(Ships, u.guid) \r\nelseif u.type == 'Aircraft' then -- check if group, if so add the group guid to the table\r\n    table.insert(AC, u.guid) \r\nelseif u.type == 'Submarine' then -- check if group, if so add the group guid to the table\r\n    table.insert(Subs, u.guid) \r\nend\r\nend\r\nprint(\"Ships: \"..#Ships..\", Aircraft: \"..#AC..\", Submarines: \"..#Subs)\r\nprint('Please note that this function may use a lot of memory if there are a lot of units, you may need to restart soon.')\r\nprint('==================================================================================================================')\r\n\r\nreturn #AC,#Ships,#Subs\r\nend -- function end\r\n\r\nlocal AC,Ships,Subs = GetUnitTotals('Crimson Commonwealth')\r\nprint(AC)\r\n\r\nlocal startAC,startShips,startSubs = 275,35,8\r\nlocal AClost = startAC-AC\r\nlocal ShipsLost=startShips -Ships\r\nlocal SubsLost = startSubs-Subs\r\n\r\nlocal message = '<h3>Intel Report - Enemy Losses</h3><p>Our pre-war intel says that the Crimson Commonwealth had the following unit totals:<br>'..\r\n'Aircraft: 275<br>Ships: 35<br>Subs: 8 </p>'..\r\n'<p>Enemy losses to date are:<br>'..\r\nAClost..' Aircraft<br>'..ShipsLost..' Ships<br>'..SubsLost..' Subs</p>'\r\n\r\nScenEdit_SpecialMessage('playerside',message)"
date: 1564977294
